@import 'settings';
@import 'functions';
@import 'media-queries';

@mixin column($gutters: true) {
    @if $gutters==true {
        #{$gutters-type}-left: $gutters-side-width;
        #{$gutters-type}-right: $gutters-side-width;
    }

    min-height: 1px;
    @content;
}

@mixin size-auto($breakpoint: false) {
    @if $breakpoint==false {
        width: auto;
        flex-basis: auto;
        max-width: none;
    }

    @else {
        @include media($breakpoint) {
            width: auto;
            flex-basis: auto;
            max-width: none;
            @content;
        }
    }
}

@mixin size-grow($breakpoint: false) {
    @if $breakpoint==false {
        flex-grow: 1;
        flex-basis: 0;
        max-width: 100%;
    }

    @else {
        @include media($breakpoint) {
            flex-grow: 1;
            flex-basis: 0;
            max-width: 100%;
            @content;
        }
    }
}

@mixin size-of($number-of-columns: $max-number-of-columns, $breakpoint: false, $gutters: true) {
    @if $breakpoint==false or $breakpoint==null {
        max-width: column-width($number-of-columns, $gutters);
        flex-basis: column-width($number-of-columns, $gutters);
        flex-grow: 0;
    }

    @else {
        @include media($breakpoint) {
            max-width: column-width($number-of-columns, $gutters);
            flex-basis: column-width($number-of-columns, $gutters);
            flex-grow: 0;
            @content;
        }
    }
}

@mixin make-column-auto {
    .#{map-get($classnames, column)} {
        @include column();
    }

    .#{map-get($classnames, column-auto)} {
        @include size-auto();
    }

    @each $breakpoint,
    $width in $breakpoints {
        .#{map-get($classnames, column-auto)}-#{$breakpoint} {
            @include size-auto($breakpoint);
        }
    }
}

@mixin make-column-grow {
    .#{map-get($classnames, column)} {
        @include column();
    }

    .#{map-get($classnames, column-grow)} {
        @include size-grow();
    }

    @each $breakpoint,
    $width in $breakpoints {
        .#{map-get($classnames, column-grow)}-#{$breakpoint} {
            @include size-grow($breakpoint);
        }
    }
}

@mixin make-column-of {
    .#{map-get($classnames, column)} {
        @include column();
    }

    $size: 1;
    @while ($max-number-of-columns >= $size) {
        .#{map-get($classnames, column)}#{map-get($classnames, separator)}#{$size} {
            @include size-of($size);
        }

        @each $breakpoint, $width in $breakpoints {
            .#{map-get($classnames, column)}-#{$breakpoint}#{map-get($classnames, separator)}#{$size} {
                @include size-of($size, $breakpoint);
            }
            $size: $size + 1;
        }
    }
}